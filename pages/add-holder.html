<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Holder - Whalet</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../styles/custom.css">
    <script src="../scripts/navigation.js"></script>
    <style>
        .form-input:focus, .form-select:focus {
            border-color: #7D33FF !important;
            --tw-ring-color: #7D33FF !important;
            --tw-ring-opacity: 0.5 !important;
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000) !important;
        }
        .submit-btn {
            background-color: #7D33FF !important;
            color: white !important;
        }
        .submit-btn:hover {
            background-color: #6929CC !important;
        }
        .upload-area {
            min-height: 160px;
            transition: all 0.3s ease;
        }
        .upload-area:hover {
            border-color: #7D33FF;
            background-color: #F9F7FF;
        }
        .form-section {
            background-color: #F9FAFB;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .form-section-title {
            font-size: 1rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-6">
        <div class="max-w-6xl mx-auto bg-white rounded-lg shadow-sm">
            <!-- Header -->
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <a href="javascript:void(0)" onclick="goBack()" class="text-purple-600 hover:text-purple-700 mr-2">
                            <i class="fas fa-arrow-left"></i>
                        </a>
                        <a href="javascript:void(0)" onclick="goBack()" class="text-purple-600 hover:text-purple-700 mr-4">Back</a>
                        <h1 class="text-xl font-semibold text-gray-800">Add Holder</h1>
                    </div>
                    <a href="javascript:void(0)" onclick="closePage()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </a>
                </div>
            </div>

            <!-- Form Content -->
            <div class="p-6">
                <form id="addHolderForm" class="space-y-6">
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h3 class="form-section-title">Basic Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Holder Type -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> Holder Type
                                </label>
                                <select required class="form-select w-full p-2 border border-gray-300 rounded-md">
                                    <option value="">Please select holder type</option>
                                    <option value="personal">Individual</option>
                                    <option value="company">Company</option>
                                </select>
                            </div>

                            <!-- Holder Region -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> Holder Region
                                </label>
                                <select required class="form-select w-full p-2 border border-gray-300 rounded-md">
                                    <option value="">Please select holder region</option>
                                    <option value="CN">China (Mainland) (CN)</option>
                                </select>
                            </div>

                            <!-- Holder Identity -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> Holder Identity
                                </label>
                                <select required class="form-select w-full p-2 border border-gray-300 rounded-md">
                                    <option value="">Please select holder identity</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Supporting Documents -->
                    <div class="form-section">
                        <h3 class="form-section-title">Supporting Documents</h3>
                        <!-- Platform Proof -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span class="text-red-500">*</span> Platform Proof
                            </label>
                            <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                <div class="mb-4">
                                    <i class="fas fa-cloud-upload-alt text-gray-400 text-3xl"></i>
                                    <p class="text-sm text-gray-500 mt-2">Click or drag files here to upload</p>
                                </div>
                                <p class="text-xs text-gray-500">Please upload screenshots showing account platform names, such as Amazon, PayPal backend screenshots, etc.</p>
                                <p class="text-xs text-gray-500 mt-1">Supported formats: jpg, jpeg, png, pdf, bmp, zip, rar</p>
                            </div>
                        </div>

                        <!-- ID Type -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span class="text-red-500">*</span> ID Type
                            </label>
                            <select required class="form-select w-full p-2 border border-gray-300 rounded-md">
                                <option value="">Please select ID type</option>
                                <option value="id">Chinese Mainland Second Generation ID Card</option>
                            </select>
                        </div>

                        <!-- ID Photos -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> ID Photo Front
                                </label>
                                <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                    <div class="mb-2">
                                        <i class="fas fa-id-card text-gray-400 text-3xl"></i>
                                        <p class="text-sm text-gray-500 mt-2">Front of ID</p>
                                    </div>
                                    <a href="#" class="text-blue-600 text-sm hover:text-blue-800">View Example</a>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> ID Photo Back
                                </label>
                                <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                    <div class="mb-2">
                                        <i class="fas fa-id-card text-gray-400 text-3xl"></i>
                                        <p class="text-sm text-gray-500 mt-2">Back of ID</p>
                                    </div>
                                    <a href="#" class="text-blue-600 text-sm hover:text-blue-800">View Example</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Personal Information -->
                    <div class="form-section">
                        <h3 class="form-section-title">Personal Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Holder Name -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> Holder Name
                                </label>
                                <input type="text" required placeholder="Please enter name as shown on ID" class="form-input w-full p-2 border border-gray-300 rounded-md">
                            </div>

                            <!-- English Name -->
                            <div class="col-span-2 grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        <span class="text-red-500">*</span> Given Name (Pinyin/English)
                                    </label>
                                    <input type="text" required placeholder="Given name in Pinyin or English" class="form-input w-full p-2 border border-gray-300 rounded-md">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        <span class="text-red-500">*</span> Family Name (Pinyin/English)
                                    </label>
                                    <input type="text" required placeholder="Family name in Pinyin or English" class="form-input w-full p-2 border border-gray-300 rounded-md">
                                </div>
                            </div>

                            <!-- ID Number -->
                            <div class="col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> ID Number
                                </label>
                                <input type="text" required placeholder="Please enter ID number" class="form-input w-full p-2 border border-gray-300 rounded-md">
                            </div>

                            <!-- Date of Birth -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> Date of Birth
                                </label>
                                <input type="date" required class="form-input w-full p-2 border border-gray-300 rounded-md">
                            </div>

                            <!-- Gender -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> Gender
                                </label>
                                <select required class="form-select w-full p-2 border border-gray-300 rounded-md">
                                    <option value="">Please select gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>

                            <!-- ID Expiry Date -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> ID Expiry Date
                                </label>
                                <input type="date" required class="form-input w-full p-2 border border-gray-300 rounded-md">
                            </div>

                            <!-- Nationality -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> Nationality
                                </label>
                                <select required class="form-select w-full p-2 border border-gray-300 rounded-md">
                                    <option value="">Please select nationality</option>
                                    <option value="CN">Chinese</option>
                                </select>
                            </div>

                            <!-- ID Issuing Authority -->
                            <div class="col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> ID Issuing Authority
                                </label>
                                <input type="text" required placeholder="Please enter issuing authority" class="form-input w-full p-2 border border-gray-300 rounded-md">
                            </div>

                            <!-- Address -->
                            <div class="col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    <span class="text-red-500">*</span> Address
                                </label>
                                <textarea required rows="3" placeholder="Please enter detailed address" class="form-input w-full p-2 border border-gray-300 rounded-md resize-none"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="flex justify-end space-x-4">
                        <a href="javascript:void(0)" onclick="goBack()" class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                            Cancel
                        </a>
                        <button type="submit" class="submit-btn px-6 py-2 rounded-md">
                            Submit
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // 浏览器返回和关闭函数
        function goBack() {
            // 检查是否有历史记录可以返回
            if (history.length > 1) {
                history.back();
            } else {
                // 如果没有历史记录，则跳转到默认页面
                window.location.href = 'holder-management.html';
            }
        }

        function closePage() {
            // 尝试关闭当前窗口/标签页
            if (window.opener) {
                // 如果是通过其他窗口打开的，关闭当前窗口
                window.close();
            } else {
                // 如果无法关闭窗口，则返回上一页
                goBack();
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // 修改取消按钮为使用 goBack 函数
            const cancelButton = document.querySelector('a[href="holder-management.html"]');
            if (cancelButton && cancelButton.textContent.trim() === 'Cancel') {
                cancelButton.href = 'javascript:void(0)';
                cancelButton.onclick = goBack;
            }

            // Form submission handler
            document.getElementById('addHolderForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Basic validation
                const requiredFields = this.querySelectorAll('[required]');
                let isValid = true;
                
                requiredFields.forEach(field => {
                    if (!field.value.trim()) {
                        isValid = false;
                        field.focus();
                        return false;
                    }
                });
                
                if (isValid) {
                    // Simulate form submission
                    alert('Holder information submitted successfully!');
                    // 提交成功后返回上一页
                    goBack();
                } else {
                    alert('Please fill in all required fields.');
                }
            });

            // Custom validation messages
            document.querySelectorAll('input[required], select[required], textarea[required]').forEach(function(input) {
                input.addEventListener('invalid', function(e) {
                    input.setCustomValidity('Please fill out this field.');
                });
                input.addEventListener('input', function(e) {
                    input.setCustomValidity('');
                });
            });

            // Select validation messages
            document.querySelectorAll('select[required]').forEach(function(select) {
                select.addEventListener('invalid', function(e) {
                    select.setCustomValidity('Please select an option from the list.');
                });
                select.addEventListener('input', function(e) {
                    select.setCustomValidity('');
                });
            });
        });
    </script>
</body>
</html> 